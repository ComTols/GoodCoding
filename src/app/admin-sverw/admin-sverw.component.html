<mat-icon class="addPerson" *ngIf="!isEdit">add_circle</mat-icon>
<h1>{{isEdit ? "Stammdaten bearbeiten" : "Schülerverwaltung"}}</h1>
<p>{{isEdit ? "Sie haben einen Schüler ausgewählt. Überprüfen Sie die eingetragenenen Daten und verändern Sie diese." : "Die Schüler sind nach Klassen geordnet. Sobald sich ein Schüler zum ersten Mal im Portal angemeldet hat, erscheint
	dieser in der Liste als 'Nicht freigegeben'. Sie können diesen Schülern entweder einzeln oder allen auf einmal den
	Zugang gewähren. Jedem neuen Schüler muss eine Klasse bzw. ein Kurs zugeordnet werden. Alternativ können Sie
	Schüler
	manuell hinzufügen. Dazu klicken Sie bitte auf das Plus auf der rechten Seite."}}</p>
<mat-accordion *ngIf="!isEdit">
	<mat-expansion-panel *ngFor="let class of data">
		<mat-expansion-panel-header>
			{{class.class}}
		</mat-expansion-panel-header>
		<table mat-table #table [dataSource]="class.member">

			<ng-container matColumnDef="checkbox">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let row">
					<mat-checkbox (click)="onClickCheckbox(row.username)"></mat-checkbox>
				</td>
			</ng-container>
			<ng-container matColumnDef="forename">
				<th mat-header-cell *matHeaderCellDef> Vorname </th>
				<td mat-cell *matCellDef="let row"> {{row.forename}} </td>
			</ng-container>
			<ng-container matColumnDef="lastname">
				<th mat-header-cell *matHeaderCellDef> Nachname </th>
				<td mat-cell *matCellDef="let row"> {{row.lastname}} </td>
			</ng-container>
			<ng-container matColumnDef="noDatabase">
				<th mat-header-cell *matHeaderCellDef> Datenbanken </th>
				<td mat-cell *matCellDef="let row"> {{row.noDatabase}} </td>
			</ng-container>
			<ng-container matColumnDef="lastLogin">
				<th mat-header-cell *matHeaderCellDef> Letzter Login </th>
				<td mat-cell *matCellDef="let row"> {{row.lastLogin}} </td>
			</ng-container>
			<ng-container matColumnDef="actions">
				<th mat-header-cell *matHeaderCellDef></th>
				<td mat-cell *matCellDef="let row">
					<button mat-icon-button (click)="onClickEdit(row.username)">
						<mat-icon>create</mat-icon>
					</button>
					<button mat-icon-button (click)="onClickLock(row.username)">
						<mat-icon>lock</mat-icon>
					</button>
					<button mat-icon-button (click)="onClickDelete(row.username)">
						<mat-icon>delete</mat-icon>
					</button>
					<button mat-icon-button (click)="onClickAdmin(row.username)">
						<mat-icon>vpn_key</mat-icon>
					</button>
				</td>
			</ng-container>

			<tr mat-header-row
				*matHeaderRowDef="['checkbox', 'forename', 'lastname', 'noDatabase', 'lastLogin', 'actions']">
			</tr>
			<tr mat-row
				*matRowDef="let row; columns: ['checkbox', 'forename', 'lastname', 'noDatabase', 'lastLogin', 'actions'];">
			</tr>
		</table>
		<p style="margin-top: 2em;">
			<span>Ausgewählte Schüler:</span>
			<button mat-icon-button>
				<mat-icon (click)="onClickEditAll(class.class)">create</mat-icon>
			</button>
			<button mat-icon-button>
				<mat-icon>lock</mat-icon>
			</button>
			<button mat-icon-button>
				<mat-icon>delete</mat-icon>
			</button>
			<button mat-icon-button>
				<mat-icon>vpn_key</mat-icon>
			</button>
		</p>
	</mat-expansion-panel>
</mat-accordion>
<div *ngIf="isEdit">
	<form [formGroup]="editForm" (ngSubmit)="sendEdit()">
		<mat-card *ngFor="let user of editUsers">
			<mat-card-header>
				<mat-icon mat-card-avatar>account_circle</mat-icon>
				<mat-card-title>{{user.username}}</mat-card-title>
				<mat-card-subtitle>Benutzername</mat-card-subtitle>
			</mat-card-header>
			<mat-card-content>
				<p>
					<mat-form-field appearance="outline">
						<mat-label>Vorname</mat-label>
						<input matInput placeholder="Vorname" name="forename" formControlName="forename">
					</mat-form-field>
				</p>
				<p>
					<mat-form-field appearance="outline">
						<mat-label>Nachname</mat-label>
						<input matInput placeholder="Nachname" name="lastname" formControlName="lastname">
					</mat-form-field>
				</p>
				<p>
					<mat-form-field appearance="outline">
						<mat-label>Klasse/Kurs</mat-label>
						<mat-select name="class" formControlName="class">
							<mat-option *ngFor="let course of data" [value]="course">
								{{course.class}}
							</mat-option>
						</mat-select>
					</mat-form-field><button mat-icon-button (click)="onClickAddClass()">
						<mat-icon>add_circle</mat-icon>
					</button>
				</p>
			</mat-card-content>
			<mat-card-actions *ngIf="editUsers?.length == 1">
				<button mat-button (click)="onClickBack()">Zurück</button>
				<button mat-button (click)="onClickSave()">Speichern</button>
			</mat-card-actions>
		</mat-card>
	</form>
	<div *ngIf="editUsers?.length > 1" id="multiSelectButtons">
		<button mat-raised-button (click)="onClickBack()">Zurück</button>
		<button mat-raised-button (click)="onClickSave()">Speichern</button>
	</div>
</div>